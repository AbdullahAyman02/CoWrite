# CoWrite: Real-Time Collaborative Editor

    

A high-performance collaborative text editor that allows multiple users to edit documents simultaneously with **eventual consistency**. This project utilizes a hybrid backend architecture, leveraging **Spring Boot** for secure user management and **Node.js** for handling high-concurrency real-time WebSocket connections via **CRDTs**.

-----

## ğŸš€ Key Features

### âš¡ Real-Time Synchronization (Node.js)

  * **Conflict-free Replicated Data Types (CRDTs)**: Implemented a custom Sequence CRDT (Logoot-inspired) to ensure data consistency without central locking. Operations are commutative and idempotent, allowing for seamless merging of concurrent edits.
  * **Low-Latency Communication**: Uses **Socket.IO** to broadcast character insertions/deletions to all connected clients in milliseconds.
  * **Presence Awareness**: Tracks active cursors and user presence in real-time.

### ğŸ›¡ï¸ Robust Backend API (Spring Boot)

  * **Stateless Authentication**: Secured via **Spring Security** and **JWT** (JSON Web Tokens). The token is generated by Spring and validated by the Node.js service for socket connections.
  * **Relational Persistence**: Maps complex user relationships and document metadata using **Hibernate/JPA** and **MySQL**.
  * **Version Control System**: Snapshots document states to allow users to view document history and rollback to previous versions.

### ğŸ¨ Modern Frontend (React)

  * **Rich Text Editing**: Built on top of **Draft.js** (or custom ContentEditable implementation), utilizing local CRDT state management to render remote changes fluidly.
  * **Responsive UI**: Styled with **Tailwind CSS** for a clean, distraction-free writing experience.

-----

## ğŸ—ï¸ System Architecture

The system uses a microservices-lite approach to separate concerns:

```text
[ User / React Client ]
       |       |
       |       +------------------------+
       |                                |
  (HTTPS / REST)                 (WSS / Socket.IO)
       |                                |
       v                                v
[ Spring Boot Service ]        [ Node.js Service ]
(Auth, Users, Meta)          (Sync, CRDT Logic)
       |                                |
       +-----------+   +----------------+
                   |   |
                   v   v
            [ MySQL Database ]
```

-----

## ğŸ› ï¸ Tech Stack

| Component | Technology | Key Libraries |
| :--- | :--- | :--- |
| **Core Backend** | **Java 17, Spring Boot 3** | Spring Security, Spring Data JPA, Lombok, JJWT |
| **Real-Time Service** | **Node.js, Express** | Socket.io, Sequelize (or mysql2), CRDT Implementation |
| **Frontend** | **React.js (Vite)** | Draft.js, Tailwind CSS, Axios, Socket.io-client |
| **Database** | **MySQL 8.0** | Relational Schema (Users, Documents, Versions) |
| **DevOps** | **Docker** | Dockerfiles for containerization |

-----

## ğŸ“‚ Project Structure

```
â”œâ”€â”€ Backend/                # Spring Boot Application
â”‚   â”œâ”€â”€ src/main/java/com/example/CoWrite/
â”‚   â”‚   â”œâ”€â”€ Controllers/    # REST Endpoints (Auth, Users)
â”‚   â”‚   â”œâ”€â”€ Models/         # JPA Entities (User, Document)
â”‚   â”‚   â”œâ”€â”€ Services/       # Business Logic
â”‚   â”‚   â””â”€â”€ Utils/          # JWT Security Filters
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ Node/                   # Real-time Service
â”‚   â”œâ”€â”€ CRDTs/              # Core CRDT Logic (Doc.js, CRDT.js)
â”‚   â”œâ”€â”€ models/             # Database Models for Node
â”‚   â”œâ”€â”€ socket.js           # WebSocket Event Handlers
â”‚   â””â”€â”€ index.js            # Server Entry Point
â”œâ”€â”€ Frontend/               # React Application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # Editor, Navbar, Auth Forms
â”‚   â”‚   â”œâ”€â”€ CRDTs/          # Client-side CRDT Integration
â”‚   â”‚   â””â”€â”€ contexts/       # Auth & WebSocket Context Providers
```

-----

## ğŸ”§ Installation & Setup

### Prerequisites

  * Java 17+ & Maven
  * Node.js 18+ & NPM
  * MySQL Server running on port `3306`

### 1\. Database Configuration

Create a MySQL database named `cowrite_db`. The Spring Boot application will handle table creation on the first run.

### 2\. Run Spring Boot Service (Auth & API)

```bash
cd Backend
# Update application.properties with your DB credentials if needed
./mvnw spring-boot:run
```

*Server starts on `http://localhost:8080`*

### 3\. Run Node.js Service (Real-Time)

```bash
cd Node
npm install
# Ensure db.js points to your MySQL instance
node index.js
```

*Socket Server starts on `http://localhost:3001` (or configured port)*

### 4\. Run React Client

```bash
cd Frontend
npm install
npm run dev
```

*Client starts on `http://localhost:5173`*

-----

## ğŸ§  Technical Highlights

  * **Handling Concurrency:** To resolve the "concurrent editing problem" (User A types "Hello" while User B deletes the first character), I implemented a Sequence CRDT. Every character is assigned a unique, fractional ID (e.g., `0.5`, `0.55`, `0.6`). This ensures that operations are commutativeâ€”the order in which they arrive at the server does not break the document state.
  * **Hybrid Auth Flow:** The React client authenticates with Spring Boot to receive a JWT. This JWT is then passed in the handshake query of the Socket.IO connection to the Node.js server, which validates the signature before allowing a WebSocket connection.

-----

## ğŸ“œ License

Distributed under the MIT License. See `LICENSE` for more information.
